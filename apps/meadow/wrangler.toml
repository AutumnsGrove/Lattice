name = "grove-meadow"
compatibility_date = "2025-01-01"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = ".svelte-kit/cloudflare"

# Environment variables for local development
[vars]
SITE_NAME = "Meadow"
SITE_URL = "http://localhost:5175"

# D1 database (shared grove-engine-db for cross-app messages)
[[d1_databases]]
binding = "DB"
database_name = "grove-engine-db"
database_id = "a6394da2-b7a6-48ce-b7fe-b1eb3e730e68"

# KV namespace for feed page caching (2-min TTL)
[[kv_namespaces]]
binding = "CACHE_KV"
id = "fbf702e54358468d8ec767ca0bfc8c56"
preview_id = "fbf702e54358468d8ec767ca0bfc8c56"

# Service binding to Heartwood auth service
[[services]]
binding = "AUTH"
service = "groveauth"

# ThresholdDO: Per-identifier rate limiting (Loom pattern)
[[durable_objects.bindings]]
name = "THRESHOLD"
class_name = "ThresholdDO"
script_name = "grove-durable-objects"
