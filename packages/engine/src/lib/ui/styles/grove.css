/**
 * Grove Design System - Main Stylesheet
 *
 * Import this file to use Grove styles in your project.
 * "a place to Be"
 */

@import './tokens.css';

/* ═══════════════════════════════════════════════════════════════
   TAILWIND DIRECTIVES
   ═══════════════════════════════════════════════════════════════ */

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ═══════════════════════════════════════════════════════════════
   BASE LAYER
   ═══════════════════════════════════════════════════════════════ */

@layer base {
  *,
  *::before,
  *::after {
    border-color: var(--color-border);
  }

  html {
    font-family: var(--font-sans);
    line-height: var(--leading-body);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    scroll-behavior: smooth;
  }

  body {
    background-color: var(--color-background);
    color: var(--color-foreground);
    font-size: var(--text-body);
    min-height: 100vh;
  }

  /* Typography defaults */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-serif);
    font-weight: var(--font-weight-normal);
    line-height: var(--leading-heading);
    color: var(--color-foreground);
    text-wrap: balance;
  }

  h1 {
    font-size: var(--text-display);
    letter-spacing: var(--tracking-tight);
  }

  h2 {
    font-size: var(--text-display-sm);
    letter-spacing: var(--tracking-tight);
  }

  h3 {
    font-size: var(--text-heading-lg);
  }

  h4 {
    font-size: var(--text-heading);
  }

  h5 {
    font-size: var(--text-heading-sm);
  }

  h6 {
    font-size: var(--text-body);
    font-weight: var(--font-weight-semibold);
  }

  p {
    line-height: var(--leading-body);
    text-wrap: pretty;
  }

  a {
    color: var(--grove-600);
    text-decoration-line: underline;
    text-decoration-color: var(--grove-300);
    text-underline-offset: 2px;
    transition: color var(--duration) var(--ease-default),
                text-decoration-color var(--duration) var(--ease-default);
  }

  a:hover {
    color: var(--grove-700);
    text-decoration-color: var(--grove-500);
  }

  /* Focus styles */
  :focus-visible {
    outline: none;
    box-shadow: var(--shadow-focus);
  }

  /* Selection */
  ::selection {
    background-color: var(--grove-200);
    color: var(--grove-900);
  }

  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

/* ═══════════════════════════════════════════════════════════════
   COMPONENT LAYER
   ═══════════════════════════════════════════════════════════════ */

@layer components {
  /* ─────────────────────────────────────────────────────────────
     BUTTONS
     ───────────────────────────────────────────────────────────── */

  .grove-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    font-family: var(--font-sans);
    font-weight: var(--font-weight-medium);
    text-decoration: none;
    white-space: nowrap;
    border-radius: var(--radius-grove);
    transition: all var(--duration) var(--ease-default);
    cursor: pointer;
    user-select: none;
  }

  .grove-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
  }

  .grove-btn:focus-visible {
    outline: none;
    box-shadow: var(--shadow-focus);
  }

  /* Button sizes */
  .grove-btn-sm {
    height: 2rem;
    padding: 0 var(--space-3);
    font-size: var(--text-body-sm);
  }

  .grove-btn-md {
    height: 2.5rem;
    padding: 0 var(--space-4);
    font-size: var(--text-body-sm);
  }

  .grove-btn-lg {
    height: 3rem;
    padding: 0 var(--space-6);
    font-size: var(--text-body);
  }

  /* Button variants */
  .grove-btn-primary {
    background-color: var(--grove-600);
    color: white;
    border: none;
  }

  .grove-btn-primary:hover:not(:disabled) {
    background-color: var(--grove-700);
  }

  .grove-btn-primary:active:not(:disabled) {
    background-color: var(--grove-800);
  }

  .grove-btn-secondary {
    background-color: var(--cream-300);
    color: var(--bark);
    border: 1px solid var(--cream-400);
  }

  .grove-btn-secondary:hover:not(:disabled) {
    background-color: var(--cream-400);
    border-color: var(--cream-500);
  }

  .grove-btn-secondary:active:not(:disabled) {
    background-color: var(--cream-500);
  }

  .grove-btn-ghost {
    background-color: transparent;
    color: var(--bark);
    border: none;
  }

  .grove-btn-ghost:hover:not(:disabled) {
    background-color: var(--cream-300);
  }

  .grove-btn-ghost:active:not(:disabled) {
    background-color: var(--cream-400);
  }

  .grove-btn-outline {
    background-color: transparent;
    color: var(--grove-600);
    border: 1px solid var(--grove-600);
  }

  .grove-btn-outline:hover:not(:disabled) {
    background-color: var(--grove-50);
  }

  .grove-btn-outline:active:not(:disabled) {
    background-color: var(--grove-100);
  }

  /* ─────────────────────────────────────────────────────────────
     FORM ELEMENTS
     ───────────────────────────────────────────────────────────── */

  .grove-input {
    width: 100%;
    height: 2.5rem;
    padding: 0 var(--space-3);
    font-family: var(--font-sans);
    font-size: var(--text-body);
    color: var(--color-foreground);
    background-color: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-grove);
    transition: border-color var(--duration) var(--ease-default),
                box-shadow var(--duration) var(--ease-default);
  }

  .grove-input::placeholder {
    color: var(--bark-500);
  }

  .grove-input:hover:not(:disabled):not(:focus) {
    border-color: var(--cream-400);
  }

  .grove-input:focus {
    outline: none;
    border-color: var(--grove-500);
    box-shadow: 0 0 0 3px rgb(22 163 74 / 0.15);
  }

  .grove-input:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    background-color: var(--cream-200);
  }

  .grove-input-error {
    border-color: var(--color-error);
  }

  .grove-input-error:focus {
    border-color: var(--color-error);
    box-shadow: 0 0 0 3px rgb(220 38 38 / 0.15);
  }

  .grove-textarea {
    min-height: 6rem;
    padding: var(--space-3);
    resize: vertical;
  }

  .grove-label {
    display: block;
    margin-bottom: var(--space-1-5);
    font-family: var(--font-sans);
    font-size: var(--text-body-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-foreground);
  }

  .grove-label-required::after {
    content: ' *';
    color: var(--color-error);
  }

  .grove-help-text {
    margin-top: var(--space-1-5);
    font-size: var(--text-caption);
    color: var(--bark-600);
  }

  .grove-error-text {
    margin-top: var(--space-1-5);
    font-size: var(--text-caption);
    color: var(--color-error);
  }

  /* ─────────────────────────────────────────────────────────────
     CARDS
     ───────────────────────────────────────────────────────────── */

  .grove-card {
    background-color: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-grove-lg);
    box-shadow: var(--shadow-grove-sm);
  }

  .grove-card-hover {
    transition: box-shadow var(--duration) var(--ease-default),
                transform var(--duration) var(--ease-default);
  }

  .grove-card-hover:hover {
    box-shadow: var(--shadow-grove-md);
    transform: translateY(-2px);
  }

  .grove-card-header {
    padding: var(--space-4) var(--space-5);
    border-bottom: 1px solid var(--color-border);
  }

  .grove-card-body {
    padding: var(--space-5);
  }

  .grove-card-footer {
    padding: var(--space-4) var(--space-5);
    border-top: 1px solid var(--color-border);
    background-color: var(--cream-100);
    border-radius: 0 0 var(--radius-grove-lg) var(--radius-grove-lg);
  }

  /* ─────────────────────────────────────────────────────────────
     BADGES
     ───────────────────────────────────────────────────────────── */

  .grove-badge {
    display: inline-flex;
    align-items: center;
    gap: var(--space-1);
    padding: var(--space-0-5) var(--space-2);
    font-family: var(--font-sans);
    font-size: var(--text-caption);
    font-weight: var(--font-weight-medium);
    line-height: 1.5;
    border-radius: var(--radius-full);
  }

  .grove-badge-default {
    background-color: var(--cream-300);
    color: var(--bark);
  }

  .grove-badge-primary {
    background-color: var(--grove-100);
    color: var(--grove-800);
  }

  .grove-badge-success {
    background-color: var(--color-success-light);
    color: var(--color-success-foreground);
  }

  .grove-badge-warning {
    background-color: var(--color-warning-light);
    color: var(--color-warning-foreground);
  }

  .grove-badge-error {
    background-color: var(--color-error-light);
    color: var(--color-error-foreground);
  }

  .grove-badge-info {
    background-color: var(--color-info-light);
    color: var(--color-info-foreground);
  }

  /* ─────────────────────────────────────────────────────────────
     ALERTS
     ───────────────────────────────────────────────────────────── */

  .grove-alert {
    display: flex;
    gap: var(--space-3);
    padding: var(--space-4);
    border-radius: var(--radius-grove);
    border-left: 3px solid;
  }

  .grove-alert-success {
    background-color: var(--color-success-light);
    border-left-color: var(--color-success);
    color: var(--color-success-foreground);
  }

  .grove-alert-warning {
    background-color: var(--color-warning-light);
    border-left-color: var(--color-warning);
    color: var(--color-warning-foreground);
  }

  .grove-alert-error {
    background-color: var(--color-error-light);
    border-left-color: var(--color-error);
    color: var(--color-error-foreground);
  }

  .grove-alert-info {
    background-color: var(--color-info-light);
    border-left-color: var(--color-info);
    color: var(--color-info-foreground);
  }

  /* ─────────────────────────────────────────────────────────────
     DIVIDERS
     ───────────────────────────────────────────────────────────── */

  .grove-divider {
    display: flex;
    align-items: center;
    width: 100%;
    height: 1px;
    background-color: var(--color-border);
  }

  .grove-divider-text {
    display: flex;
    align-items: center;
    gap: var(--space-4);
  }

  .grove-divider-text::before,
  .grove-divider-text::after {
    content: '';
    flex: 1;
    height: 1px;
    background-color: var(--color-border);
  }

  .grove-divider-leaf {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-3);
  }

  .grove-divider-leaf::before,
  .grove-divider-leaf::after {
    content: '';
    flex: 1;
    height: 1px;
    background-color: var(--color-border);
  }

  /* ─────────────────────────────────────────────────────────────
     AVATAR
     ───────────────────────────────────────────────────────────── */

  .grove-avatar {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    border-radius: var(--radius-full);
    background-color: var(--grove-100);
    color: var(--grove-700);
    font-family: var(--font-sans);
    font-weight: var(--font-weight-medium);
  }

  .grove-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .grove-avatar-sm {
    width: 2rem;
    height: 2rem;
    font-size: var(--text-caption);
  }

  .grove-avatar-md {
    width: 2.5rem;
    height: 2.5rem;
    font-size: var(--text-body-sm);
  }

  .grove-avatar-lg {
    width: 3rem;
    height: 3rem;
    font-size: var(--text-body);
  }

  .grove-avatar-xl {
    width: 4rem;
    height: 4rem;
    font-size: var(--text-heading);
  }

  /* ─────────────────────────────────────────────────────────────
     MODAL
     ───────────────────────────────────────────────────────────── */

  .grove-modal-backdrop {
    position: fixed;
    inset: 0;
    background-color: rgb(61 41 20 / 0.4);
    backdrop-filter: blur(4px);
    z-index: var(--z-modal-backdrop);
  }

  .grove-modal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    max-width: 32rem;
    max-height: calc(100vh - 4rem);
    overflow-y: auto;
    background-color: var(--color-background);
    border-radius: var(--radius-grove-xl);
    box-shadow: var(--shadow-grove-xl);
    z-index: var(--z-modal);
  }

  .grove-modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-4) var(--space-5);
    border-bottom: 1px solid var(--color-border);
  }

  .grove-modal-title {
    font-family: var(--font-serif);
    font-size: var(--text-heading);
    font-weight: var(--font-weight-normal);
  }

  .grove-modal-body {
    padding: var(--space-5);
  }

  .grove-modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: var(--space-3);
    padding: var(--space-4) var(--space-5);
    border-top: 1px solid var(--color-border);
    background-color: var(--cream-100);
    border-radius: 0 0 var(--radius-grove-xl) var(--radius-grove-xl);
  }

  /* ─────────────────────────────────────────────────────────────
     TOOLTIP
     ───────────────────────────────────────────────────────────── */

  .grove-tooltip {
    position: absolute;
    padding: var(--space-1-5) var(--space-2-5);
    font-family: var(--font-sans);
    font-size: var(--text-caption);
    color: var(--cream);
    background-color: var(--bark);
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-grove-md);
    z-index: var(--z-tooltip);
    pointer-events: none;
    white-space: nowrap;
  }

  .grove-tooltip::before {
    content: '';
    position: absolute;
    border: 4px solid transparent;
  }

  .grove-tooltip-top::before {
    bottom: -8px;
    left: 50%;
    transform: translateX(-50%);
    border-top-color: var(--bark);
  }

  .grove-tooltip-bottom::before {
    top: -8px;
    left: 50%;
    transform: translateX(-50%);
    border-bottom-color: var(--bark);
  }

  /* ─────────────────────────────────────────────────────────────
     PROGRESS
     ───────────────────────────────────────────────────────────── */

  .grove-progress {
    width: 100%;
    height: 0.5rem;
    background-color: var(--cream-300);
    border-radius: var(--radius-full);
    overflow: hidden;
  }

  .grove-progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--grove-400), var(--grove-500), var(--grove-600));
    border-radius: var(--radius-full);
    transition: width var(--duration-slow) var(--ease-soft);
  }

  .grove-progress-indeterminate .grove-progress-bar {
    width: 30%;
    animation: grove-progress-slide 1.5s ease-in-out infinite;
  }

  @keyframes grove-progress-slide {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(400%); }
  }

  /* ─────────────────────────────────────────────────────────────
     SPINNER
     ───────────────────────────────────────────────────────────── */

  .grove-spinner {
    display: inline-block;
    border-radius: var(--radius-full);
    border: 2px solid var(--cream-400);
    border-top-color: var(--grove-600);
    animation: spin 0.8s linear infinite;
  }

  .grove-spinner-sm {
    width: 1rem;
    height: 1rem;
  }

  .grove-spinner-md {
    width: 1.5rem;
    height: 1.5rem;
  }

  .grove-spinner-lg {
    width: 2rem;
    height: 2rem;
  }

  .grove-spinner-organic {
    animation: grove-spin-organic 1.5s ease-in-out infinite;
  }

  @keyframes spin {
    to { transform: rotate(360deg); }
  }
}

/* ═══════════════════════════════════════════════════════════════
   UTILITY LAYER
   ═══════════════════════════════════════════════════════════════ */

@layer utilities {
  /* Organic backgrounds */
  .bg-leaf-pattern {
    background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 5c-5 8-15 12-15 20s10 15 15 25c5-10 15-17 15-25S35 13 30 5z' fill='%2316a34a' fill-opacity='0.03'/%3E%3C/svg%3E");
    background-repeat: repeat;
  }

  /* Text wrapping */
  .text-balance {
    text-wrap: balance;
  }

  .text-pretty {
    text-wrap: pretty;
  }

  /* Animation delays */
  .animation-delay-100 { animation-delay: 100ms; }
  .animation-delay-200 { animation-delay: 200ms; }
  .animation-delay-300 { animation-delay: 300ms; }
  .animation-delay-500 { animation-delay: 500ms; }

  /* Focus ring variations */
  .focus-grove:focus-visible {
    outline: none;
    box-shadow: var(--shadow-focus);
  }

  .focus-grove-inset:focus-visible {
    outline: none;
    box-shadow: inset 0 0 0 2px var(--grove-500);
  }

  /* ─────────────────────────────────────────────────────────────
     GLASSMORPHISM UTILITIES

     Apply these classes to any element for glass effects.
     Combine with Tailwind backdrop-blur-* for blur intensity.

     Usage:
       <div class="glass">...</div>
       <div class="glass-accent backdrop-blur-md">...</div>
     ───────────────────────────────────────────────────────────── */

  /* Base glass - light translucent background */
  .glass {
    background-color: rgb(255 255 255 / 0.7);
    border: 1px solid rgb(255 255 255 / 0.3);
    backdrop-filter: blur(4px);
  }

  :is(.dark .glass) {
    background-color: rgb(30 41 59 / 0.6);
    border-color: rgb(71 85 105 / 0.3);
  }

  /* Glass surface - higher opacity for headers/navbars */
  .glass-surface {
    background-color: rgb(255 255 255 / 0.95);
    border: 1px solid rgb(255 255 255 / 0.3);
    backdrop-filter: blur(4px);
  }

  :is(.dark .glass-surface) {
    background-color: rgb(30 41 59 / 0.95);
    border-color: rgb(71 85 105 / 0.3);
  }

  /* Glass overlay - dark backdrop for modals */
  .glass-overlay {
    background-color: rgb(0 0 0 / 0.5);
    backdrop-filter: blur(4px);
  }

  :is(.dark .glass-overlay) {
    background-color: rgb(0 0 0 / 0.6);
  }

  /* Glass accent - tinted with grove green (accent color) */
  .glass-accent {
    background-color: color-mix(in srgb, var(--grove-500) 20%, transparent);
    border: 1px solid color-mix(in srgb, var(--grove-500) 30%, transparent);
    backdrop-filter: blur(4px);
  }

  :is(.dark .glass-accent) {
    background-color: color-mix(in srgb, var(--grove-500) 15%, transparent);
    border-color: color-mix(in srgb, var(--grove-500) 20%, transparent);
  }

  /* Glass muted - subtle, barely visible */
  .glass-muted {
    background-color: rgb(255 255 255 / 0.4);
    border: 1px solid rgb(255 255 255 / 0.2);
    backdrop-filter: blur(4px);
  }

  :is(.dark .glass-muted) {
    background-color: rgb(15 23 42 / 0.3);
    border-color: rgb(51 65 85 / 0.2);
  }

  /* Glass tint - light background for text readability */
  .glass-tint {
    background-color: rgb(255 255 255 / 0.6);
    border: 1px solid rgb(255 255 255 / 0.2);
    backdrop-filter: blur(4px);
  }

  :is(.dark .glass-tint) {
    background-color: rgb(15 23 42 / 0.5);
    border-color: rgb(51 65 85 / 0.3);
  }

  /* Glass dark - dark translucent background */
  .glass-dark {
    background-color: rgb(15 23 42 / 0.7);
    border: 1px solid rgb(51 65 85 / 0.3);
    backdrop-filter: blur(4px);
    color: white;
  }

  :is(.dark .glass-dark) {
    background-color: rgb(2 6 23 / 0.8);
    border-color: rgb(51 65 85 / 0.3);
  }

  /* Glass frosted - stronger effect, more opaque */
  .glass-frosted {
    background-color: rgb(255 255 255 / 0.85);
    border: 1px solid rgb(255 255 255 / 0.4);
    backdrop-filter: blur(12px);
  }

  :is(.dark .glass-frosted) {
    background-color: rgb(30 41 59 / 0.8);
    border-color: rgb(71 85 105 / 0.4);
  }

  /* No border variants */
  .glass-borderless {
    border: none;
  }

  /* Hover states for interactive glass elements */
  .glass-hover:hover {
    background-color: rgb(255 255 255 / 0.85);
    border-color: rgb(255 255 255 / 0.5);
  }

  :is(.dark .glass-hover:hover) {
    background-color: rgb(30 41 59 / 0.75);
    border-color: rgb(71 85 105 / 0.4);
  }

  /* Reduced motion: disable blur effects for performance/accessibility */
  @media (prefers-reduced-motion: reduce) {
    .glass,
    .glass-surface,
    .glass-overlay,
    .glass-accent,
    .glass-muted,
    .glass-tint,
    .glass-dark,
    .glass-frosted {
      backdrop-filter: none;
    }
  }
}
