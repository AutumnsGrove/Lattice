<!doctype html>
<html lang="en">
  <head>
    <!-- Blocking script to prevent FOUC (flash of unstyled content) -->
    <script>
      try {
        const stored = localStorage.getItem("grove-theme");
        // Default to dark if no stored preference (matches theme store default)
        if (stored === "dark" || !stored) {
          document.documentElement.classList.add("dark");
        }
      } catch (e) {
        // localStorage unavailable, default to dark
        document.documentElement.classList.add("dark");
      }
    </script>
    <!-- Loading overlay styles (inline for immediate rendering) -->
    <style id="grove-loading-styles">
      /* ══════════════════════════════════════════════════════════════
         GROVE ENTRANCE ANIMATION - "Parting the Vines"
         ══════════════════════════════════════════════════════════════ */

      #grove-loading-overlay {
        position: fixed;
        inset: 0;
        /* z-grove-entrance (100000): Semantic z-index from tailwind.preset.js.
           Must appear above ALL other UI including modals, mobile menus, and
           any future overlays. This is a first-paint blocking element that
           MUST cover everything until the app is ready. */
        z-index: 100000;
        display: flex;
        align-items: center;
        justify-content: center;
        pointer-events: none;
      }

      /* ─────────────────────────────────────────────────────────────
         Vine Panels (the curtains that part)
         ───────────────────────────────────────────────────────────── */

      /* ═══════════════════════════════════════════════════════════════════
         VINE PATTERN SVG ANATOMY (350×900 viewport)
         ═══════════════════════════════════════════════════════════════════

         The pattern is dense on the LEFT (panel outer edge) and fades
         toward the RIGHT (where the two panels meet in center).

         ┌─────────────────────────────────────────────────────────────────┐
         │  GRADIENTS (in <defs>)                                         │
         │  ├─ vineGrad: left→right fade (0.85 → 0.25 opacity)            │
         │  │  Used by main vines flowing outward                         │
         │  └─ vineGradReverse: right→left fade                           │
         │     Used by 2 counter-directional vines for organic variety    │
         ├─────────────────────────────────────────────────────────────────┤
         │  STRUCTURAL VINES (stroked paths, no fill)                     │
         │  ├─ 5 main vines: thick (3-4px), flow top→bottom with curves   │
         │  │  Start at y=-20, exit at y=940 for seamless vertical tile   │
         │  ├─ 2 counter-directional: flow opposite way (breaks pattern)  │
         │  ├─ 7 lateral tendrils: connect main vines horizontally        │
         │  └─ 10 spiral curls: decorative flourishes at vine junctions   │
         ├─────────────────────────────────────────────────────────────────┤
         │  LEAVES (filled shapes)                                        │
         │  ├─ 12 ivy leaves: pointed 3-lobe shapes (Q curves)            │
         │  │  Signature Grove element, scattered along vine paths        │
         │  └─ 10 round leaves: rotated ellipses for variety              │
         ├─────────────────────────────────────────────────────────────────┤
         │  FERNS (grouped elements with stem + leaflets)                 │
         │  └─ 4 fern fronds: stem line + 5 alternating ellipse leaflets  │
         │     Each at different rotation, adds texture and depth         │
         ├─────────────────────────────────────────────────────────────────┤
         │  FLOATING SEEDS (tiny circles, very low opacity)               │
         │  └─ 11 seeds: r=1.5-2.2, opacity 0.22-0.35                     │
         │     Scattered in negative space, suggests life/motion          │
         ├─────────────────────────────────────────────────────────────────┤
         │  FAR ELEMENTS (rightmost, lowest opacity)                      │
         │  └─ 6 distant leaves/ellipses at 0.18-0.28 opacity             │
         │     Creates depth illusion as pattern fades toward center      │
         └─────────────────────────────────────────────────────────────────┘

         TILING: Pattern designed to tile vertically (repeat-y).
         Vines start above viewport (y < 0) and exit below (y > 900)
         so seams are invisible.

         COLOR: All elements use #22c55e (grove-500) or #16a34a (grove-600).
         Depth created through opacity variation (0.18 to 0.85), not color.
         ═══════════════════════════════════════════════════════════════════ */
      .grove-vine-panel {
        --vine-pattern: url("data:image/svg+xml,%3Csvg width='350' height='900' viewBox='0 0 350 900' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3ClinearGradient id='vineGrad' x1='0%25' y1='0%25' x2='100%25' y2='0%25'%3E%3Cstop offset='0%25' stop-color='%2322c55e' stop-opacity='0.85'/%3E%3Cstop offset='100%25' stop-color='%2322c55e' stop-opacity='0.25'/%3E%3C/linearGradient%3E%3ClinearGradient id='vineGradReverse' x1='100%25' y1='0%25' x2='0%25' y2='0%25'%3E%3Cstop offset='0%25' stop-color='%2316a34a' stop-opacity='0.7'/%3E%3Cstop offset='100%25' stop-color='%2316a34a' stop-opacity='0.3'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cg fill='none' stroke-linecap='round'%3E%3Cpath d='M-15 -20 C50 60 25 150 70 240 S35 380 85 480 S45 620 95 720 S55 820 40 940' stroke='url(%23vineGrad)' stroke-width='4' opacity='0.8'/%3E%3Cpath d='M-10 80 C60 140 40 220 90 320 S50 450 100 550 S60 680 50 780 S30 860 20 940' stroke='url(%23vineGrad)' stroke-width='3.5' opacity='0.75'/%3E%3Cpath d='M-20 200 C55 260 30 350 80 450 S40 580 70 680 S35 780 25 940' stroke='url(%23vineGrad)' stroke-width='3.2' opacity='0.7'/%3E%3Cpath d='M-5 350 C65 400 45 480 95 560 S55 680 85 760 S50 850 40 940' stroke='url(%23vineGrad)' stroke-width='3' opacity='0.65'/%3E%3Cpath d='M-12 550 C70 600 50 680 100 760 S65 850 55 940' stroke='url(%23vineGrad)' stroke-width='2.8' opacity='0.6'/%3E%3Cpath d='M180 -10 C140 80 160 180 120 280 S155 400 115 500 S145 620 100 720' stroke='url(%23vineGradReverse)' stroke-width='2.5' opacity='0.5'/%3E%3Cpath d='M220 300 C170 380 190 480 140 580 S175 700 130 800 S160 880 140 940' stroke='url(%23vineGradReverse)' stroke-width='2.2' opacity='0.45'/%3E%3Cpath d='M70 240 C120 225 160 260 210 235' stroke='url(%23vineGrad)' stroke-width='2' opacity='0.5'/%3E%3Cpath d='M85 480 C140 465 185 500 240 475' stroke='url(%23vineGrad)' stroke-width='1.8' opacity='0.45'/%3E%3Cpath d='M95 720 C150 705 200 740 260 715' stroke='url(%23vineGrad)' stroke-width='1.8' opacity='0.4'/%3E%3Cpath d='M90 320 C145 340 180 305 230 325' stroke='url(%23vineGrad)' stroke-width='1.6' opacity='0.45'/%3E%3Cpath d='M100 550 C155 570 195 535 250 555' stroke='url(%23vineGrad)' stroke-width='1.5' opacity='0.4'/%3E%3Cpath d='M70 680 C125 660 165 695 220 675' stroke='url(%23vineGrad)' stroke-width='1.5' opacity='0.35'/%3E%3Cpath d='M50 780 C105 800 145 765 200 785' stroke='url(%23vineGrad)' stroke-width='1.4' opacity='0.35'/%3E%3Cpath d='M70 240 Q95 220 108 195 Q118 170 105 158 Q90 150 78 165' stroke='%2322c55e' stroke-width='1.3' opacity='0.55'/%3E%3Cpath d='M85 480 Q110 460 123 435 Q133 408 118 398 Q102 392 92 408' stroke='%2322c55e' stroke-width='1.2' opacity='0.5'/%3E%3Cpath d='M95 720 Q120 700 133 675 Q143 648 128 638 Q112 632 102 648' stroke='%2322c55e' stroke-width='1.2' opacity='0.45'/%3E%3Cpath d='M90 320 Q115 300 125 275 Q132 252 118 245 Q105 242 98 258' stroke='%2322c55e' stroke-width='1.1' opacity='0.5'/%3E%3Cpath d='M100 550 Q125 530 135 505 Q142 480 128 472 Q115 468 108 485' stroke='%2322c55e' stroke-width='1.1' opacity='0.45'/%3E%3Cpath d='M65 400 Q50 420 55 445 Q65 468 85 458' stroke='%2322c55e' stroke-width='1' opacity='0.45'/%3E%3Cpath d='M75 620 Q60 640 65 665 Q75 688 95 678' stroke='%2322c55e' stroke-width='1' opacity='0.4'/%3E%3Cpath d='M55 820 Q40 840 45 865 Q55 888 75 878' stroke='%2322c55e' stroke-width='0.9' opacity='0.35'/%3E%3Cpath d='M120 280 Q100 260 80 265 Q62 275 72 295' stroke='%2322c55e' stroke-width='1' opacity='0.4'/%3E%3Cpath d='M140 580 Q120 560 100 565 Q82 575 92 595' stroke='%2322c55e' stroke-width='1' opacity='0.35'/%3E%3C/g%3E%3Cg fill='%2322c55e'%3E%3Cpath d='M55 180 Q78 150 68 122 Q55 152 32 165 Q55 178 55 180Z' opacity='0.65'/%3E%3Cpath d='M75 300 Q98 270 88 242 Q75 272 52 285 Q75 298 75 300Z' opacity='0.6'/%3E%3Cpath d='M65 420 Q88 390 78 362 Q65 392 42 405 Q65 418 65 420Z' opacity='0.55'/%3E%3Cpath d='M85 540 Q108 510 98 482 Q85 512 62 525 Q85 538 85 540Z' opacity='0.55'/%3E%3Cpath d='M70 660 Q93 630 83 602 Q70 632 47 645 Q70 658 70 660Z' opacity='0.5'/%3E%3Cpath d='M80 780 Q103 750 93 722 Q80 752 57 765 Q80 778 80 780Z' opacity='0.45'/%3E%3Cpath d='M60 870 Q83 840 73 812 Q60 842 37 855 Q60 868 60 870Z' opacity='0.4'/%3E%3Cpath d='M120 260 Q140 235 132 212 Q120 238 102 248 Q120 258 120 260Z' opacity='0.45'/%3E%3Cpath d='M145 500 Q165 475 157 452 Q145 478 127 488 Q145 498 145 500Z' opacity='0.4'/%3E%3Cpath d='M130 740 Q150 715 142 692 Q130 718 112 728 Q130 738 130 740Z' opacity='0.35'/%3E%3Cpath d='M155 380 Q175 355 167 332 Q155 358 137 368 Q155 378 155 380Z' opacity='0.38'/%3E%3Cpath d='M140 620 Q160 595 152 572 Q140 598 122 608 Q140 618 140 620Z' opacity='0.35'/%3E%3Cellipse cx='40' cy='230' rx='12' ry='18' transform='rotate(-25 40 230)' opacity='0.55'/%3E%3Cellipse cx='55' cy='370' rx='11' ry='16' transform='rotate(-30 55 370)' opacity='0.5'/%3E%3Cellipse cx='50' cy='510' rx='11' ry='16' transform='rotate(-20 50 510)' opacity='0.45'/%3E%3Cellipse cx='65' cy='650' rx='10' ry='15' transform='rotate(-28 65 650)' opacity='0.45'/%3E%3Cellipse cx='45' cy='750' rx='10' ry='15' transform='rotate(-22 45 750)' opacity='0.4'/%3E%3Cellipse cx='55' cy='850' rx='9' ry='14' transform='rotate(-18 55 850)' opacity='0.35'/%3E%3Cellipse cx='110' cy='330' rx='8' ry='12' transform='rotate(-35 110 330)' opacity='0.4'/%3E%3Cellipse cx='125' cy='570' rx='8' ry='12' transform='rotate(-32 125 570)' opacity='0.35'/%3E%3Cellipse cx='115' cy='700' rx='7' ry='11' transform='rotate(-28 115 700)' opacity='0.32'/%3E%3Cellipse cx='100' cy='830' rx='7' ry='11' transform='rotate(-25 100 830)' opacity='0.3'/%3E%3Cg transform='translate(30 100) rotate(-15)' opacity='0.6'%3E%3Cpath d='M0,0 L0,-45' stroke='%2322c55e' stroke-width='0.9' fill='none'/%3E%3Cellipse cx='-6' cy='-10' rx='5' ry='8' transform='rotate(-30 -6 -10)'/%3E%3Cellipse cx='6' cy='-18' rx='5' ry='8' transform='rotate(30 6 -18)'/%3E%3Cellipse cx='-5' cy='-26' rx='4.5' ry='7' transform='rotate(-30 -5 -26)'/%3E%3Cellipse cx='5' cy='-34' rx='4.5' ry='7' transform='rotate(30 5 -34)'/%3E%3Cellipse cx='0' cy='-42' rx='4' ry='6'/%3E%3C/g%3E%3Cg transform='translate(45 340) rotate(-25)' opacity='0.5'%3E%3Cpath d='M0,0 L0,-42' stroke='%2322c55e' stroke-width='0.8' fill='none'/%3E%3Cellipse cx='-6' cy='-9' rx='4.5' ry='7' transform='rotate(-28 -6 -9)'/%3E%3Cellipse cx='6' cy='-17' rx='4.5' ry='7' transform='rotate(28 6 -17)'/%3E%3Cellipse cx='-5' cy='-25' rx='4' ry='6' transform='rotate(-28 -5 -25)'/%3E%3Cellipse cx='5' cy='-33' rx='4' ry='6' transform='rotate(28 5 -33)'/%3E%3Cellipse cx='0' cy='-40' rx='3.5' ry='5.5'/%3E%3C/g%3E%3Cg transform='translate(60 580) rotate(-20)' opacity='0.45'%3E%3Cpath d='M0,0 L0,-40' stroke='%2322c55e' stroke-width='0.8' fill='none'/%3E%3Cellipse cx='-5' cy='-8' rx='4' ry='6.5' transform='rotate(-25 -5 -8)'/%3E%3Cellipse cx='5' cy='-16' rx='4' ry='6.5' transform='rotate(25 5 -16)'/%3E%3Cellipse cx='-4' cy='-24' rx='3.5' ry='6' transform='rotate(-25 -4 -24)'/%3E%3Cellipse cx='4' cy='-32' rx='3.5' ry='6' transform='rotate(25 4 -32)'/%3E%3C/g%3E%3Cg transform='translate(35 800) rotate(-12)' opacity='0.4'%3E%3Cpath d='M0,0 L0,-38' stroke='%2322c55e' stroke-width='0.7' fill='none'/%3E%3Cellipse cx='-5' cy='-8' rx='4' ry='6' transform='rotate(-22 -5 -8)'/%3E%3Cellipse cx='5' cy='-15' rx='4' ry='6' transform='rotate(22 5 -15)'/%3E%3Cellipse cx='-4' cy='-23' rx='3.5' ry='5.5' transform='rotate(-22 -4 -23)'/%3E%3Cellipse cx='4' cy='-31' rx='3.5' ry='5.5' transform='rotate(22 4 -31)'/%3E%3C/g%3E%3Ccircle cx='95' cy='150' r='2' opacity='0.35'/%3E%3Ccircle cx='130' cy='220' r='1.8' opacity='0.3'/%3E%3Ccircle cx='85' cy='290' r='2.2' opacity='0.32'/%3E%3Ccircle cx='150' cy='420' r='1.5' opacity='0.28'/%3E%3Ccircle cx='105' cy='480' r='2' opacity='0.3'/%3E%3Ccircle cx='170' cy='560' r='1.8' opacity='0.25'/%3E%3Ccircle cx='90' cy='600' r='2' opacity='0.3'/%3E%3Ccircle cx='140' cy='680' r='1.5' opacity='0.25'/%3E%3Ccircle cx='75' cy='720' r='2.2' opacity='0.28'/%3E%3Ccircle cx='160' cy='800' r='1.8' opacity='0.22'/%3E%3Ccircle cx='110' cy='860' r='2' opacity='0.25'/%3E%3Cpath d='M200 250 Q220 228 212 205 Q200 228 182 240 Q200 248 200 250Z' opacity='0.28'/%3E%3Cpath d='M220 490 Q240 468 232 445 Q220 468 202 480 Q220 488 220 490Z' opacity='0.25'/%3E%3Cpath d='M190 730 Q210 708 202 685 Q190 708 172 720 Q190 728 190 730Z' opacity='0.22'/%3E%3Cellipse cx='210' cy='350' rx='6' ry='10' transform='rotate(-40 210 350)' opacity='0.22'/%3E%3Cellipse cx='230' cy='600' rx='6' ry='10' transform='rotate(-35 230 600)' opacity='0.2'/%3E%3Cellipse cx='200' cy='820' rx='5' ry='9' transform='rotate(-30 200 820)' opacity='0.18'/%3E%3C/g%3E%3C/svg%3E");
        position: absolute;
        top: 0;
        height: 100%;
        width: 55vw; /* Overlap in center for seamless coverage */
        /* Transparent background — just vines, no green space.
           The site shows through completely as vines part. */
        background-color: transparent;
        background-image: var(--vine-pattern);
        background-size: auto 100%;
        background-repeat: repeat-y;
        will-change: transform;
        pointer-events: auto;
      }

      .grove-vine-left {
        left: 0;
        background-position: right center;
      }

      .grove-vine-right {
        right: 0;
        background-position: left center;
        transform: scaleX(-1);
      }

      /* ─────────────────────────────────────────────────────────────
         Logo (center, breathing)
         ───────────────────────────────────────────────────────────── */

      .grove-entrance-logo {
        position: relative;
        z-index: 1;
      }

      .grove-loader-logo {
        width: 80px;
        height: 80px;
        animation: grove-breathe 2s ease-in-out infinite;
      }

      html:not(.dark) .grove-loader-bg {
        fill: #dcfce7;
      }

      @keyframes grove-breathe {
        0%, 100% { opacity: 1; transform: scale(1); }
        50% { opacity: 0.7; transform: scale(0.96); }
      }

      /* ─────────────────────────────────────────────────────────────
         Parting Animation Keyframes
         ───────────────────────────────────────────────────────────── */

      @keyframes grove-vine-part-left {
        0% { transform: translateX(0); }
        100% { transform: translateX(-100%); }
      }

      @keyframes grove-vine-part-right {
        0% { transform: translateX(0) scaleX(-1); }
        100% { transform: translateX(100%) scaleX(-1); }
      }

      @keyframes grove-logo-exit {
        0% { opacity: 1; transform: scale(1); }
        100% { opacity: 0; transform: scale(0.85); }
      }

      /* ─────────────────────────────────────────────────────────────
         Parting State (triggered by adding .grove-parting class)
         ───────────────────────────────────────────────────────────── */

      .grove-parting .grove-vine-left {
        animation: grove-vine-part-left 1000ms cubic-bezier(0.4, 0, 0.2, 1) 400ms forwards;
      }

      .grove-parting .grove-vine-right {
        animation: grove-vine-part-right 1000ms cubic-bezier(0.4, 0, 0.2, 1) 400ms forwards;
      }

      .grove-parting .grove-entrance-logo {
        animation: grove-logo-exit 600ms ease-in 300ms forwards;
      }

      /* ─────────────────────────────────────────────────────────────
         Reduced Motion: Instant fade (accessibility)
         ───────────────────────────────────────────────────────────── */

      @media (prefers-reduced-motion: reduce) {
        .grove-loader-logo { animation: none; }

        .grove-parting .grove-vine-left,
        .grove-parting .grove-vine-right {
          animation: none;
          opacity: 0;
          transition: opacity 0.15s ease-out;
        }

        .grove-parting .grove-entrance-logo {
          animation: none;
          opacity: 0;
          transition: opacity 0.15s ease-out;
        }
      }
    </style>
    <!-- Fallback for users with JavaScript disabled -->
    <noscript>
      <style>#grove-loading-overlay { display: none !important; }</style>
    </noscript>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="Grove: a place to Be. Coming soon." />
    <meta name="theme-color" content="#16a34a" />
    <!-- Prevent Dark Reader from interfering with Grove's native dark mode -->
    <meta name="darkreader-lock" />

    <!-- Favicons -->
    <link
      rel="icon"
      type="image/svg+xml"
      href="%sveltekit.assets%/favicon.svg"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="%sveltekit.assets%/favicon-32x32.png"
    />

    <!-- Apple Touch Icon (iOS home screen, iMessage previews) -->
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="%sveltekit.assets%/apple-touch-icon.png"
    />

    <!-- Safari Pinned Tab -->
    <link
      rel="mask-icon"
      href="%sveltekit.assets%/safari-pinned-tab.svg"
      color="#16a34a"
    />

    <!-- PWA Manifest -->
    <link rel="manifest" href="%sveltekit.assets%/site.webmanifest" />

    <!-- Windows -->
    <meta name="msapplication-TileColor" content="#0f172a" />
    <meta name="msapplication-config" content="none" />
    %sveltekit.head%
  </head>
  <body data-sveltekit-preload-data="hover">
    <!-- First Paint Loading Overlay - "Parting the Vines" -->
    <div id="grove-loading-overlay" aria-hidden="true">
      <!-- Left vine panel -->
      <div class="grove-vine-panel grove-vine-left"></div>

      <!-- Center: breathing logo -->
      <div class="grove-entrance-logo">
        <svg class="grove-loader-logo" viewBox="-28 -28 156 156" xmlns="http://www.w3.org/2000/svg">
          <!-- Background circle -->
          <circle cx="50" cy="50" r="70" fill="#122a1a" class="grove-loader-bg" />
          <!-- Tree with -12deg rotation (summer palette) -->
          <g transform="rotate(-12 50 50)">
            <path fill="#15803d" d="M50 5 L18 32 L50 18 Z"/>
            <path fill="#86efac" d="M50 5 L50 18 L82 32 Z"/>
            <path fill="#166534" d="M50 20 L12 50 L50 35 Z"/>
            <path fill="#4ade80" d="M50 20 L50 35 L88 50 Z"/>
            <path fill="#14532d" d="M50 38 L18 68 L50 54 Z"/>
            <path fill="#22c55e" d="M50 38 L50 54 L82 68 Z"/>
            <path fill="#3d2914" d="M50 54 L42 58 L46 100 L50 100 Z"/>
            <path fill="#5a3f30" d="M50 54 L58 58 L54 100 L50 100 Z"/>
          </g>
        </svg>
      </div>

      <!-- Right vine panel -->
      <div class="grove-vine-panel grove-vine-right"></div>
    </div>
    <div style="display: contents">%sveltekit.body%</div>
    <!-- Fallback overlay removal (handles edge cases where Svelte doesn't hydrate) -->
    <script>
      window.addEventListener('load', function() {
        setTimeout(function() {
          var o = document.getElementById('grove-loading-overlay');
          if (o && !o.classList.contains('grove-parting')) {
            o.classList.add('grove-parting');
            setTimeout(function() { o.remove(); }, 2000);
          }
        }, 100);
      });
    </script>
  </body>
</html>
